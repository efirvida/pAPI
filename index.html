
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="pAPI – Official Documentación">
      
      
        <meta name="author" content="Eduardo Miguel Fírvida Donestevez">
      
      
        <link rel="canonical" href="https://efirvida.github.io/papi/">
      
      
      
        <link rel="next" href="tutorials/hello_world/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Home - pAPI – Python/Pluggable API Framework</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#papi-pluggable-python-api-framework" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="pAPI – Python/Pluggable API Framework" class="md-header__button md-logo" aria-label="pAPI – Python/Pluggable API Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pAPI – Python/Pluggable API Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="." class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="reference/router/" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="pAPI – Python/Pluggable API Framework" class="md-nav__button md-logo" aria-label="pAPI – Python/Pluggable API Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    pAPI – Python/Pluggable API Framework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="." class="md-nav__link md-nav__link--active">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/hello_world/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Your first Addon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/hello_world_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Addon Life cycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/weather_mongodb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Weather API (MongoDB)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/weather_sqlalchemy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Weather API (SQL)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="tutorials/website/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Static Files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pAPI Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            pAPI Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reference/router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reference/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reference/db/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reference/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-papi" class="md-nav__link">
    <span class="md-ellipsis">
      ⚙️ What is pAPI?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-features" class="md-nav__link">
    <span class="md-ellipsis">
      🔧 Core Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🔧 Core Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modular-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      🧩 Modular Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent-native-interface" class="md-nav__link">
    <span class="md-ellipsis">
      🤖 Agent-Native Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-database-layer" class="md-nav__link">
    <span class="md-ellipsis">
      🗄️ Built-in Database Layer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🗄️ Built-in Database Layer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smart-and-flexible-integration" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Smart and Flexible Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unified-response-system" class="md-nav__link">
    <span class="md-ellipsis">
      📦 Unified Response System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📦 Unified Response System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structured-response-format" class="md-nav__link">
    <span class="md-ellipsis">
      🧱 Structured Response Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_response-standardized-response-builder" class="md-nav__link">
    <span class="md-ellipsis">
      ⚙️ create_response: Standardized Response Builder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unified-exception-handling" class="md-nav__link">
    <span class="md-ellipsis">
      🚨 Unified Exception Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-friendly-cli" class="md-nav__link">
    <span class="md-ellipsis">
      🛠️ Developer-Friendly CLI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🛠️ Developer-Friendly CLI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      🧠 Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli-overview" class="md-nav__link">
    <span class="md-ellipsis">
      🧪 CLI Overview
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-shell-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      🐚 Interactive Shell Utilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🐚 Interactive Shell Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mongodb-integration" class="md-nav__link">
    <span class="md-ellipsis">
      MongoDB Integration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlalchemy-integration" class="md-nav__link">
    <span class="md-ellipsis">
      SQLAlchemy Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addon-system" class="md-nav__link">
    <span class="md-ellipsis">
      📦 Addon System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📦 Addon System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anatomy-of-an-addon" class="md-nav__link">
    <span class="md-ellipsis">
      🧬 Anatomy of an Addon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manifestyaml" class="md-nav__link">
    <span class="md-ellipsis">
      📑 manifest.yaml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="📑 manifest.yaml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addon-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      🔗 Addon Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      🐍 Python Dependencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-configuration-configyaml" class="md-nav__link">
    <span class="md-ellipsis">
      🧪 Example Configuration (config.yaml)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      🚀 Quickstart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      🧠 Use Cases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      📬 Contributing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      🪪 License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="papi-pluggable-python-api-framework">pAPI — Pluggable Python API Framework<a class="headerlink" href="#papi-pluggable-python-api-framework" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>GitHub</strong>: <a href="https://github.com/efirvida/papi">https://github.com/efirvida/papi</a></p>
</blockquote>
<p>pAPI is a lightweight, modular micro-framework built on top of FastAPI. It leverages FastAPI’s full feature set—routing, dependency injection, async support—without altering its internals or impacting performance. Instead, it enhances FastAPI’s routing system with dynamic discovery, a plugin-based architecture, and first-class support for agent-native endpoints, such as tools exposed via the Model Context Protocol (MCP). This makes pAPI especially well-suited for building composable microservices, intelligent agent interfaces, and modular backends.</p>
<hr />
<h2 id="what-is-papi">⚙️ What is pAPI?<a class="headerlink" href="#what-is-papi" title="Permanent link">&para;</a></h2>
<p>pAPI is designed to let you build composable APIs through reusable "addons" (self-contained units of logic). It handles:</p>
<ul>
<li>Addon registration and lifecycle</li>
<li>Auto-discovery of routers and models</li>
<li>Dependency resolution between addons</li>
<li>Consistent response formatting</li>
<li>Database abstraction with async support</li>
<li>Direct exposure of FastAPI routes as tools compatible with the <strong>Model Context Protocol (MCP)</strong> — enabling seamless integration with LLM-based agents</li>
</ul>
<hr />
<h2 id="core-features">🔧 Core Features<a class="headerlink" href="#core-features" title="Permanent link">&para;</a></h2>
<h3 id="modular-architecture">🧩 Modular Architecture<a class="headerlink" href="#modular-architecture" title="Permanent link">&para;</a></h3>
<ul>
<li>Addons are self-contained: they register their own routers, models, and lifecycle hooks.</li>
<li>Route behavior can be extended or overridden by other addons.</li>
<li>Each addon can expose tools through standard HTTP endpoints or as <strong>Model Context Protocol (MCP)</strong>-compatible tools for agent-based workflows.</li>
</ul>
<hr />
<h3 id="agent-native-interface">🤖 Agent-Native Interface<a class="headerlink" href="#agent-native-interface" title="Permanent link">&para;</a></h3>
<p>pAPI is designed with LLM-driven agents in mind. It allows you to expose FastAPI endpoints as <strong>Model Context Protocol (MCP)</strong>-compatible tools with minimal effort, supporting both JSON-over-HTTP and <strong>Server-Sent Events (SSE)</strong> for streaming.</p>
<p>✅ One-line tool exposure
✅ Seamless integration with LLM agents</p>
<p>Expose a tool in a single line:</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="kn">from</span><span class="w"> </span><span class="nn">papi.core.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">RESTRouter</span>
</span><span id="__span-0-2">
</span><span id="__span-0-3"><span class="n">router</span> <span class="o">=</span> <span class="n">RESTRouter</span><span class="p">()</span>
</span><span id="__span-0-4">
</span><span id="__span-0-5"><span class="nd">@router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/tool&quot;</span><span class="p">,</span> <span class="n">expose_as_mcp_tool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-6"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">my_tool</span><span class="p">():</span>
</span><span id="__span-0-7">    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;tool output&quot;</span><span class="p">}</span>
</span></code></pre></div>
<p>Once exposed, your tools are automatically discoverable via SSE:</p>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="p">{</span>
</span><span id="__span-1-2"><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pAPI&quot;</span><span class="p">,</span>
</span><span id="__span-1-3"><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sse&quot;</span><span class="p">,</span>
</span><span id="__span-1-4"><span class="w">  </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:8000/sse&quot;</span>
</span><span id="__span-1-5"><span class="p">}</span>
</span></code></pre></div>
<p>If you need to expose MCP tools directly without API endpoints, you can use <code>MCPRouter</code>, which is a thin wrapper around <code>FastMCP</code>:</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="kn">from</span><span class="w"> </span><span class="nn">papi.core.router</span><span class="w"> </span><span class="kn">import</span> <span class="n">MCPRouter</span>
</span><span id="__span-2-2">
</span><span id="__span-2-3"><span class="n">router</span> <span class="o">=</span> <span class="n">MCPRouter</span><span class="p">()</span>
</span><span id="__span-2-4">
</span><span id="__span-2-5"><span class="nd">@router</span><span class="o">.</span><span class="n">tool</span><span class="p">()</span>
</span><span id="__span-2-6"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">my_tool</span><span class="p">():</span>
</span><span id="__span-2-7">    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;tool output&quot;</span><span class="p">}</span>
</span></code></pre></div>
<hr />
<p>Start the full API + MCP tools with:</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1">rye<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>papi/cli.py<span class="w"> </span>webserver
</span></code></pre></div>
<p>Or launch just the MCP interface:</p>
<div class="highlight"><pre><span></span><code><span id="__span-4-1">rye<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>papi/cli.py<span class="w"> </span>mcpserver
</span></code></pre></div>
<hr />
<h3 id="built-in-database-layer">🗄️ Built-in Database Layer<a class="headerlink" href="#built-in-database-layer" title="Permanent link">&para;</a></h3>
<p>pAPI offers first-class support for multiple asynchronous databases, making it easy to combine different storage backends within a single application. The database layer is <strong>declarative and dynamic</strong> — connections are only initialized when relevant models are discovered at runtime.</p>
<p>Supported backends:</p>
<table>
<thead>
<tr>
<th>Backend</th>
<th>Library</th>
<th>Typical Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>MongoDB</td>
<td>Beanie</td>
<td>Document-oriented storage</td>
</tr>
<tr>
<td>PostgreSQL</td>
<td>SQLAlchemy</td>
<td>Relational databases</td>
</tr>
<tr>
<td>Redis</td>
<td>aioredis</td>
<td>Caching, queues, distributed locks</td>
</tr>
</tbody>
</table>
<h4 id="smart-and-flexible-integration">✅ Smart and Flexible Integration<a class="headerlink" href="#smart-and-flexible-integration" title="Permanent link">&para;</a></h4>
<ul>
<li>Models are <strong>automatically discovered</strong> during startup by inspecting enabled addons.</li>
<li>Each addon can <strong>define its own models</strong> or <strong>extend models from other addons</strong> to add new fields, relations, or behaviors.</li>
<li>No need for central registration — model discovery is fully modular.</li>
<li>Unused databases are ignored, so you only pay for what you use.</li>
</ul>
<p>This architecture allows true decoupling between services. For example, one addon can provide core user models, and another can enhance those with metadata, analytics, or external account bindings — all without modifying the original addon code.</p>
<blockquote>
<p>💡 Tip: The system is ORM/ODM-agnostic — you can bring your own schema logic and override or compose behaviors freely.</p>
</blockquote>
<hr />
<h3 id="unified-response-system">📦 Unified Response System<a class="headerlink" href="#unified-response-system" title="Permanent link">&para;</a></h3>
<p>pAPI provides an optional but powerful mechanism for standardizing responses across all endpoints. This promotes consistency, improves debuggability, and facilitates client integration—but does not constrain developers. You can continue to use raw FastAPI responses where desired.</p>
<h4 id="structured-response-format">🧱 Structured Response Format<a class="headerlink" href="#structured-response-format" title="Permanent link">&para;</a></h4>
<p>The framework offers a unified schema via the <code>APIResponse</code> model:</p>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="k">class</span><span class="w"> </span><span class="nc">APIResponse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-5-2">    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="__span-5-3">    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="__span-5-4">    <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>
</span><span id="__span-5-5">    <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">APIError</span><span class="p">]</span>
</span><span id="__span-5-6">    <span class="n">meta</span><span class="p">:</span> <span class="n">Meta</span>
</span></code></pre></div>
<p>Key components include:</p>
<ul>
<li>✅ <code>success</code>: Boolean flag indicating request outcome</li>
<li>📦 <code>data</code>: Response payload (included only if successful)</li>
<li>⚠️ <code>error</code>: Structured error object (included only on failure)</li>
<li>💬 <code>message</code>: Optional human-readable message</li>
<li>📊 <code>meta</code>: Metadata (e.g., timestamp, request ID)</li>
</ul>
<h4 id="create_response-standardized-response-builder">⚙️ <code>create_response</code>: Standardized Response Builder<a class="headerlink" href="#create_response-standardized-response-builder" title="Permanent link">&para;</a></h4>
<p>The <code>create_response()</code> helper generates well-formed <code>APIResponse</code> objects with minimal boilerplate:</p>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><span class="kn">from</span><span class="w"> </span><span class="nn">papi.core.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_response</span>
</span><span id="__span-6-2">
</span><span id="__span-6-3"><span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/hello&quot;</span><span class="p">)</span>
</span><span id="__span-6-4"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">hello</span><span class="p">():</span>
</span><span id="__span-6-5">    <span class="k">return</span> <span class="n">create_response</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, world!&quot;</span><span class="p">})</span>
</span></code></pre></div>
<p>Internally, it wraps the payload with standardized metadata and, when applicable, error details.</p>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="k">def</span><span class="w"> </span><span class="nf">create_response</span><span class="p">(</span>
</span><span id="__span-7-2">    <span class="n">data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-3">    <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-7-4">    <span class="n">message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-5">    <span class="n">error</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-6"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">APIResponse</span><span class="p">:</span>
</span><span id="__span-7-7">    <span class="o">...</span>
</span></code></pre></div>
<p>Error objects can include:</p>
<ul>
<li><code>code</code>: Application-specific error identifier</li>
<li><code>message</code>: Short description</li>
<li><code>detail</code>: Arbitrary contextual data</li>
<li><code>status_code</code>: HTTP status code to be returned</li>
</ul>
<h4 id="unified-exception-handling">🚨 Unified Exception Handling<a class="headerlink" href="#unified-exception-handling" title="Permanent link">&para;</a></h4>
<p>The optional <code>APIException</code> class makes it easy to raise consistent, structured errors:</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="k">raise</span> <span class="n">APIException</span><span class="p">(</span>
</span><span id="__span-8-2">    <span class="n">status_code</span><span class="o">=</span><span class="mi">403</span><span class="p">,</span>
</span><span id="__span-8-3">    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Access denied&quot;</span><span class="p">,</span>
</span><span id="__span-8-4">    <span class="n">code</span><span class="o">=</span><span class="s2">&quot;PERMISSION_DENIED&quot;</span><span class="p">,</span>
</span><span id="__span-8-5">    <span class="n">detail</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;required_role&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">}</span>
</span><span id="__span-8-6"><span class="p">)</span>
</span></code></pre></div>
<p>All <code>APIException</code>s are automatically serialized into the same response format used by <code>create_response</code>, ensuring uniformity across success and error cases.</p>
<blockquote>
<p>ℹ️ This system is <strong>opt-in</strong>: developers retain full control and can use native FastAPI <code>JSONResponse</code>, <code>Response</code>, or any custom return logic as needed.</p>
</blockquote>
<hr />
<h3 id="developer-friendly-cli">🛠️ Developer-Friendly CLI<a class="headerlink" href="#developer-friendly-cli" title="Permanent link">&para;</a></h3>
<p>pAPI ships with a basic CLI designed to streamline development, introspection, and deployment workflows.</p>
<div class="highlight"><pre><span></span><code><span id="__span-9-1">$<span class="w"> </span>papi_cli<span class="w"> </span>start<span class="w"> </span>webserver<span class="w">   </span><span class="c1"># Launch the FastAPI server with all registered addons</span>
</span><span id="__span-9-2">$<span class="w"> </span>papi_cli<span class="w"> </span>start<span class="w"> </span>mcpserver<span class="w">   </span><span class="c1"># Run the standalone MCP (agent) server</span>
</span><span id="__span-9-3">$<span class="w"> </span>papi_cli<span class="w"> </span>shell<span class="w">             </span><span class="c1"># Open an interactive, async-ready developer shell</span>
</span></code></pre></div>
<h4 id="key-features">🧠 Key Features<a class="headerlink" href="#key-features" title="Permanent link">&para;</a></h4>
<ul>
<li>✅ <strong>Async-aware interactive shell</strong> (with full <code>await</code> support), powered by IPython if available.</li>
<li>⚙️ <strong>Config-aware</strong>: automatically loads <code>config.yaml</code> and injects environment context.</li>
</ul>
<hr />
<h4 id="cli-overview">🧪 CLI Overview<a class="headerlink" href="#cli-overview" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span id="__span-10-1">$<span class="w"> </span>rye<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>papi/cli.py<span class="w"> </span>--help
</span></code></pre></div>
<div class="highlight"><pre><span></span><code><span id="__span-11-1">Usage: cli.py [OPTIONS] COMMAND [ARGS]...
</span><span id="__span-11-2">
</span><span id="__span-11-3">  Main entry point for pAPI service management CLI.
</span><span id="__span-11-4">
</span><span id="__span-11-5">Options:
</span><span id="__span-11-6">  --config TEXT  Path to configuration file
</span><span id="__span-11-7">  -h, --help     Show this message and exit.
</span><span id="__span-11-8">
</span><span id="__span-11-9">Commands:
</span><span id="__span-11-10">  webserver*  Start the production FastAPI web server.
</span><span id="__span-11-11">  mcpserver   Start the standalone MCP server.
</span><span id="__span-11-12">  shell       Launch an interactive IPython shell with the initialized...
</span></code></pre></div>
<hr />
<h3 id="interactive-shell-utilities">🐚 Interactive Shell Utilities<a class="headerlink" href="#interactive-shell-utilities" title="Permanent link">&para;</a></h3>
<p>The <code>shell</code> command loads a fully-initialized runtime context, including all registered database models and configurations.</p>
<h4 id="mongodb-integration">MongoDB Integration<a class="headerlink" href="#mongodb-integration" title="Permanent link">&para;</a></h4>
<p>MongoDB documents are registered and accessible via the <code>mongo_documents</code> dictionary:</p>
<div class="highlight"><pre><span></span><code><span id="__span-12-1"><span class="k">await</span> <span class="n">mongo_documents</span><span class="p">[</span><span class="s2">&quot;Image&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
</span></code></pre></div>
<p>Each key is the document class name, and the value is the corresponding <code>Beanie</code> model class.</p>
<h4 id="sqlalchemy-integration">SQLAlchemy Integration<a class="headerlink" href="#sqlalchemy-integration" title="Permanent link">&para;</a></h4>
<p>SQL models are exposed via the <code>sql_models</code> dictionary, enabling expressive, async queries with full SQLAlchemy support:</p>
<div class="highlight"><pre><span></span><code><span id="__span-13-1"><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">select</span>
</span><span id="__span-13-2">
</span><span id="__span-13-3"><span class="n">stmt</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">sql_models</span><span class="p">[</span><span class="s2">&quot;User&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sql_models</span><span class="p">[</span><span class="s2">&quot;User&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">email</span> <span class="o">==</span> <span class="s2">&quot;admin@example.com&quot;</span><span class="p">)</span>
</span><span id="__span-13-4"><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db_session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
</span><span id="__span-13-5"><span class="n">user</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">scalar_one_or_none</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p>This makes the shell ideal for advanced debugging, quick prototyping, and admin scripting—all with full access to the live database and application context.</p>
</blockquote>
<hr />
<h2 id="addon-system">📦 Addon System<a class="headerlink" href="#addon-system" title="Permanent link">&para;</a></h2>
<p>pAPI provides a robust, modular plugin system via <strong>addons</strong>—isolated Python modules that encapsulate logic, routes, models, configuration, and static assets. This architecture promotes separation of concerns, extensibility, and reusability.</p>
<hr />
<h3 id="anatomy-of-an-addon">🧬 Anatomy of an Addon<a class="headerlink" href="#anatomy-of-an-addon" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span id="__span-14-1">addons/
</span><span id="__span-14-2">└── user_auth_system/
</span><span id="__span-14-3">    ├── static/
</span><span id="__span-14-4">    │   └── static_files/
</span><span id="__span-14-5">    ├── __init__.py
</span><span id="__span-14-6">    ├── manifest.yaml
</span><span id="__span-14-7">    ├── routers.py
</span><span id="__span-14-8">    └── models.py
</span></code></pre></div>
<p>Each addon behaves as a self-contained package and is dynamically discovered and registered at runtime based on the configuration.</p>
<hr />
<h3 id="manifestyaml">📑 <code>manifest.yaml</code><a class="headerlink" href="#manifestyaml" title="Permanent link">&para;</a></h3>
<p>The mandatory <code>manifest.yaml</code> file defines metadata and dependencies for each addon:</p>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_auth_system</span>
</span><span id="__span-15-2"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1.0</span>
</span><span id="__span-15-3"><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Built-in user authentication system</span>
</span><span id="__span-15-4"><span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pAPI Team</span>
</span><span id="__span-15-5">
</span><span id="__span-15-6"><span class="nt">dependencies</span><span class="p">:</span>
</span><span id="__span-15-7"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image_storage</span>
</span><span id="__span-15-8">
</span><span id="__span-15-9"><span class="nt">python_dependencies</span><span class="p">:</span>
</span><span id="__span-15-10"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">passlib</span>
</span><span id="__span-15-11"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pydantic[email]</span>
</span></code></pre></div>
<h4 id="addon-dependencies">🔗 Addon Dependencies<a class="headerlink" href="#addon-dependencies" title="Permanent link">&para;</a></h4>
<ul>
<li>The <code>dependencies</code> field declares other addons that must be loaded before this one.</li>
<li>Dependency resolution ensures proper load order and allows addons to <strong>extend or reuse</strong> logic and models from other addons.</li>
</ul>
<h4 id="python-dependencies">🐍 Python Dependencies<a class="headerlink" href="#python-dependencies" title="Permanent link">&para;</a></h4>
<ul>
<li>The <code>python_dependencies</code> section specifies required PyPI packages for this addon.</li>
<li>These dependencies will be automatically installed with <code>pip install</code> on every startup.</li>
<li>⚠️ Use with care: untrusted or unnecessary packages may affect system stability or introduce security risks.</li>
</ul>
<hr />
<h2 id="example-configuration-configyaml">🧪 Example Configuration (<code>config.yaml</code>)<a class="headerlink" href="#example-configuration-configyaml" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span id="__span-16-1"><span class="nt">logger</span><span class="p">:</span>
</span><span id="__span-16-2"><span class="w">  </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>
</span><span id="__span-16-3"><span class="w">  </span><span class="nt">log_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./papi.log</span>
</span><span id="__span-16-4">
</span><span id="__span-16-5"><span class="nt">info</span><span class="p">:</span><span class="w">                                   </span><span class="c1"># FastAPI settings</span>
</span><span id="__span-16-6"><span class="w">  </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Testing</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">Server&quot;</span>
</span><span id="__span-16-7"><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0.0&quot;</span>
</span><span id="__span-16-8"><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Test</span><span class="nv"> </span><span class="s">instance</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">local</span><span class="nv"> </span><span class="s">development&quot;</span>
</span><span id="__span-16-9">
</span><span id="__span-16-10"><span class="nt">server</span><span class="p">:</span><span class="w">                                </span><span class="c1"># uvicorn settings</span>
</span><span id="__span-16-11"><span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.1&quot;</span>
</span><span id="__span-16-12"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8000</span>
</span><span id="__span-16-13">
</span><span id="__span-16-14"><span class="nt">database</span><span class="p">:</span>
</span><span id="__span-16-15"><span class="w">  </span><span class="nt">mongodb_uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mongodb://root:example@localhost:27017/testing_db?authSource=admin&quot;</span>
</span><span id="__span-16-16"><span class="w">  </span><span class="nt">sql_uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;postgresql+asyncpg://localhost/testing_db&quot;</span>
</span><span id="__span-16-17"><span class="w">  </span><span class="nt">redis_uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;redis://localhost:6379&quot;</span>
</span><span id="__span-16-18">
</span><span id="__span-16-19"><span class="nt">addons</span><span class="p">:</span>
</span><span id="__span-16-20"><span class="w">  </span><span class="nt">extra_addons_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/local/addons&quot;</span>
</span><span id="__span-16-21"><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span>
</span><span id="__span-16-22"><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user_auth_system</span><span class="w"> </span><span class="c1"># this will load image_storage as dependency</span>
</span><span id="__span-16-23"><span class="w">  </span><span class="nt">config</span><span class="p">:</span><span class="w">              </span><span class="c1"># Addons configuration</span>
</span><span id="__span-16-24"><span class="w">    </span><span class="nt">user_auth_system</span><span class="p">:</span>
</span><span id="__span-16-25"><span class="w">      </span><span class="nt">security</span><span class="p">:</span>
</span><span id="__span-16-26"><span class="w">        </span><span class="nt">access_token_expire_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</span><span id="__span-16-27"><span class="w">        </span><span class="nt">allow_weak_passwords</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-16-28"><span class="w">        </span><span class="nt">lockout_duration_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</span><span id="__span-16-29"><span class="w">        </span><span class="nt">bcrypt_rounds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</span><span id="__span-16-30"><span class="w">        </span><span class="nt">hash_algorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HS256&quot;</span>
</span><span id="__span-16-31"><span class="w">        </span><span class="nt">max_login_attempts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-16-32"><span class="w">        </span><span class="nt">secret_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-secret-key&quot;</span>
</span><span id="__span-16-33"><span class="w">        </span><span class="nt">token_audience</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bohio.com</span>
</span><span id="__span-16-34"><span class="w">        </span><span class="nt">token_issuer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bohio.com</span>
</span><span id="__span-16-35"><span class="w">        </span><span class="nt">key_rotation</span><span class="p">:</span>
</span><span id="__span-16-36"><span class="w">          </span><span class="nt">rotation_interval_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-16-37"><span class="w">          </span><span class="nt">max_historical_keys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-16-38"><span class="w">    </span><span class="nt">image_storage</span><span class="p">:</span>
</span><span id="__span-16-39"><span class="w">      </span><span class="nt">image_optimization</span><span class="p">:</span>
</span><span id="__span-16-40"><span class="w">        </span><span class="nt">max_dimension</span><span class="p">:</span><span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">2048</span>
</span><span id="__span-16-41"><span class="w">        </span><span class="nt">jpeg_quality</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">85</span>
</span><span id="__span-16-42"><span class="w">        </span><span class="nt">png_compression</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</span><span id="__span-16-43"><span class="w">        </span><span class="nt">webp_quality</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-16-44"><span class="w">        </span><span class="nt">force_format</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">WEBP</span>
</span><span id="__span-16-45"><span class="w">      </span><span class="nt">cache_ttl</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">3600</span>
</span><span id="__span-16-46"><span class="w">      </span><span class="nt">cache_prefix</span><span class="p">:</span><span class="w">   </span><span class="s">&quot;pAPI:image_storage:&quot;</span>
</span><span id="__span-16-47"><span class="w">      </span><span class="nt">max_image_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10485760</span>
</span><span id="__span-16-48"><span class="w">      </span><span class="nt">allowed_formats</span><span class="p">:</span>
</span><span id="__span-16-49"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JPEG</span>
</span><span id="__span-16-50"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PNG</span>
</span><span id="__span-16-51"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WEBP</span>
</span><span id="__span-16-52"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GIF</span>
</span><span id="__span-16-53"><span class="w">      </span><span class="nt">storage_backend</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
</span><span id="__span-16-54">
</span><span id="__span-16-55"><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="c1"># mounted as static files to provide global static files foled</span>
</span><span id="__span-16-56"><span class="w">  </span><span class="nt">files</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;path/to/local/storage/folder/files&quot;</span>
</span><span id="__span-16-57"><span class="w">  </span><span class="nt">images</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;path/to/local/storage/folder/images&quot;</span><span class="w"> </span><span class="c1"># used for image_storage addon</span>
</span></code></pre></div>
<hr />
<h2 id="quickstart">🚀 Quickstart<a class="headerlink" href="#quickstart" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span id="__span-17-1">git<span class="w"> </span>clone<span class="w"> </span>https://github.com/your-org/papi
</span><span id="__span-17-2"><span class="nb">cd</span><span class="w"> </span>papi
</span><span id="__span-17-3">rye<span class="w"> </span>sync
</span><span id="__span-17-4">rye<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>papi/cli.py<span class="w"> </span>webserver
</span></code></pre></div>
<hr />
<h2 id="use-cases">🧠 Use Cases<a class="headerlink" href="#use-cases" title="Permanent link">&para;</a></h2>
<p>pAPI is designed to enable modern backend patterns with minimal boilerplate. Some typical use cases include:</p>
<ul>
<li>
<p><strong>Agent-Integrated APIs</strong>
  Seamlessly expose tool-like endpoints to LLM agents and orchestration frameworks via native MCP support and SSE-compatible interfaces.</p>
</li>
<li>
<p><strong>Plugin-Driven Architectures</strong>
  Build extensible backends for <strong>low-code/no-code platforms</strong> or SaaS systems, where features are delivered as isolated, dynamically loaded addons.</p>
</li>
<li>
<p><strong>Multi-Tenant and Domain-Based Systems</strong>
  Architect modular applications where business logic, models, and routes are grouped by tenant, domain, or business unit.</p>
</li>
<li>
<p><strong>Internal Developer Tools &amp; Microservices</strong>
  Rapidly prototype lightweight internal services, MCP tools that benefit from a unified config, database access.</p>
</li>
</ul>
<hr />
<h2 id="contributing">📬 Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>We welcome pull requests!</p>
<div class="highlight"><pre><span></span><code><span id="__span-18-1"><span class="c1"># fork and clone</span>
</span><span id="__span-18-2">git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/my-feature
</span><span id="__span-18-3"><span class="c1"># write tests if applicable</span>
</span><span id="__span-18-4">git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add my-feature&quot;</span>
</span><span id="__span-18-5">git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/my-feature
</span></code></pre></div>
<p>Then open a PR on GitHub. 🚀</p>
<hr />
<h2 id="license">🪪 License<a class="headerlink" href="#license" title="Permanent link">&para;</a></h2>
<p>MIT License © 2025 — Eduardo Miguel Firvida Donestevez</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="tutorials/hello_world/" class="md-footer__link md-footer__link--next" aria-label="Next: Your first Addon">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Your first Addon
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>